{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { query as q } from 'faunadb';\nimport cookie from 'cookie';\nimport { SECRET_COOKIE } from '../../utils/cookie-auth';\nexport default /*#__PURE__*/(function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(req, res) {\n    var _req$headers$cookie;\n\n    var cookies, secret;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            cookies = cookie.parse((_req$headers$cookie = req.headers.cookie) !== null && _req$headers$cookie !== void 0 ? _req$headers$cookie : '');\n            secret = cookies[SECRET_COOKIE];\n\n            if (secret) {\n              _context.next = 4;\n              break;\n            }\n\n            return _context.abrupt(\"return\", res.status(401).send('Auth cookie missing.'));\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n})();","map":{"version":3,"sources":["/Users/Nick/Documents/ServeVue/react-auth/with-cookie-auth-fauna/pages/api/profile.js"],"names":["query","q","cookie","SECRET_COOKIE","req","res","cookies","parse","headers","secret","status","send"],"mappings":";;AAAA,SAASA,KAAK,IAAIC,CAAlB,QAA2B,SAA3B;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,aAAT,QAA8B,yBAA9B;AAEA;AAAA,sEAAe,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACPC,YAAAA,OADO,GACGJ,MAAM,CAACK,KAAP,wBAAaH,GAAG,CAACI,OAAJ,CAAYN,MAAzB,qEAAmC,EAAnC,CADH;AAEPO,YAAAA,MAFO,GAEEH,OAAO,CAACH,aAAD,CAFT;;AAAA,gBAIRM,MAJQ;AAAA;AAAA;AAAA;;AAAA,6CAKJJ,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,sBAArB,CALI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAf;;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import { query as q } from 'faunadb'\nimport cookie from 'cookie'\nimport { SECRET_COOKIE } from '../../utils/cookie-auth'\n\nexport default async (req, res) => {\n  const cookies = cookie.parse(req.headers.cookie ?? '')\n  const secret = cookies[SECRET_COOKIE]\n\n  if (!secret) {\n    return res.status(401).send('Auth cookie missing.')\n  }\n\n  // res.status(200).json({ userId: await profileApi(secret) })\n}\n"]},"metadata":{},"sourceType":"module"}